<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Login — ToolHouseBit</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/auth.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Poppins:wght@600;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <header>
        <nav class="nav">
            <a href="index.html" class="brand">ToolHouseBit</a>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="login.html">Login</a>
                <a href="register.html">Register</a>
                <a href="dashboard.html">Dashboard</a>
            </div>
        </nav>
    </header>

    <header class="form-header">
        <a href="index.html">← Home</a>
        <h2>Login</h2>
    </header>

    <main class="form-container">
        <form id="loginForm">
            <label>
                Username or Email
                <input type="text" name="identifier" required>
            </label>
            <label>
                Password
                <input type="password" name="password" required>
                <button type="button" class="show-code-btn" onclick="togglePasswordVisibility('password')">Show</button>
            </label>
            <button type="submit">Login</button>
            <div style="text-align: center; margin: 30px 0;">
                <p style="color: #5f6368; font-size: 13px; margin-bottom: 15px;">Or continue with</p>
                <button type="button" id="googleSignInBtn" class="google-signin-btn">
                    <svg style="width: 18px; height: 18px; margin-right: 8px; vertical-align: middle;"
                        viewBox="0 0 24 24">
                        <g transform="matrix(1, 0, 0, 1, 27.009766, -39.238281)">
                            <path fill="#4285F4"
                                d="M -3.264 51.509 C -3.264 50.719 -3.334 49.969 -3.454 49.239 L -14.754 49.239 L -14.754 53.749 L -8.284 53.749 C -8.574 55.229 -9.424 56.479 -10.684 57.329 L -3.264 63.161 C -1.254 61.201 -3.264 55.659 -3.264 51.509 Z" />
                            <path fill="#34A853"
                                d="M -14.754 65.609 C -11.514 68.409 -7.099 70.199 -3.264 70.199 C 4.756 70.199 11.296 67.331 14.256 62.209 L 6.514 56.379 C 5.033 57.429 3.204 58.089 -3.264 58.089 C -9.604 58.089 -15.239 53.749 -17.134 47.805 L -24.844 53.589 C -23.884 59.789 -20.534 65.609 -14.754 65.609 Z" />
                            <path fill="#FBBC05"
                                d="M -24.844 53.589 C -25.404 52.089 -25.714 50.499 -25.714 48.859 C -25.714 47.219 -25.404 45.629 -24.844 44.129 L -24.844 38.349 C -28.974 46.519 -28.974 51.199 -24.844 53.589 Z" />
                            <path fill="#EA4335"
                                d="M -14.754 32.479 C -11.514 32.479 -8.804 33.529 -6.864 35.449 L -0.644 29.249 C -3.574 26.459 -7.099 24.709 -14.754 24.709 C -20.534 24.709 -23.884 30.549 -24.844 36.749 L -17.134 42.549 C -15.239 36.809 -9.604 32.479 -14.754 32.479 Z" />
                        </g>
                    </svg>
                    <span>Sign in with Google</span>
                </button>
            </div>
            <p class="muted">Don't have an account? <a href="register.html">Register</a></p>
            <p id="lg-msg" class="msg"></p>
        </form>
    </main>

    <script src="scripts/ui.js"></script>
    <script src="scripts/auth.js"></script>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js"></script>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDFb6EfFBJ28V83gbmIHFJwInFYA3e6Xpw",
            authDomain: "toolhousebit-997be.firebaseapp.com",
            projectId: "toolhousebit-997be",
            storageBucket: "toolhousebit-997be.firebasestorage.app",
            messagingSenderId: "804791876419",
            appId: "1:804791876419:web:a54f5a6c7291bcc2240df6",
            measurementId: "G-7B4B8ZD8R6"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        document.getElementById('googleSignInBtn').addEventListener('click', (e) => {
            e.preventDefault();
            console.log('Google Sign-In button clicked');
            const provider = new firebase.auth.GoogleAuthProvider();

            firebase.auth().signInWithPopup(provider)
                .then((result) => {
                    console.log('Google Sign-In successful:', result.user);
                    window.location.href = 'dashboard.html';
                })
                .catch((error) => {
                    console.error('Sign-in error:', error);
                    document.getElementById('lg-msg').textContent = 'Sign-in failed: ' + error.message;
                });
        });
    </script>
    <script>
        function togglePasswordVisibility(inputName) {
            const input = document.querySelector(`input[name="${inputName}"]`);
            if (input.type === 'password') {
                input.type = 'text';
            } else {
                input.type = 'password';
            }
        }
    </script>
</body>

</html>